DROP TABLE ORGANIZER CASCADE CONSTRAINTS;
DROP TABLE ARTIST CASCADE CONSTRAINTS;
DROP TABLE ARTPIECE CASCADE CONSTRAINTS;
DROP TABLE ARTSHOW CASCADE CONSTRAINTS;
DROP TABLE VISITOR CASCADE CONSTRAINTS;
DROP TABLE ARRANGE CASCADE CONSTRAINTS;
DROP TABLE HAS CASCADE CONSTRAINTS;

CREATE TABLE ORGANIZER (ORGANIZERID NUMBER(5) PRIMARY KEY, ORGANIZERNAME VARCHAR2(20), SALARY NUMBER(6),
                        PHONE NUMBER(10));
CREATE TABLE ARTIST (ARTISTNAME VARCHAR2(20) PRIMARY KEY, BIRTHDATE DATE, BIRTHPLACE VARCHAR2(20));
CREATE TABLE ARTPIECE (TITLE VARCHAR2(20) PRIMARY KEY, STYLEOFART VARCHAR2(20), ARTYEAR DATE, ARTVALUE NUMBER(20),
                        ARTISTNAME VARCHAR2(20) REFERENCES ARTIST(ARTISTNAME));
CREATE TABLE ARTSHOW (SHOWID NUMBER(5) PRIMARY KEY, ROOM VARCHAR2(10), STARTDATE DATE, ENDDATE DATE, 
                        ARTISTNAME VARCHAR2(20) REFERENCES ARTIST(ARTISTNAME));
CREATE TABLE VISITOR ( VISITORID NUMBER(11) PRIMARY KEY, EMAILADDRESS VARCHAR2(20),
                        SHOWID NUMBER(5) REFERENCES ARTSHOW(SHOWID),
                        PHONE NUMBER(10), NAME VARCHAR2(20) NOT NULL);
                        
CREATE TABLE ARRANGE ( ORGANIZERID NUMBER(5) REFERENCES ORGANIZER(ORGANIZERID),
                      SHOWID NUMBER(5) REFERENCES ARTSHOW(SHOWID));
                      
CREATE TABLE HAS ( VISITORID NUMBER(11) REFERENCES VISITOR(VISITORID),
                    SHOWID NUMBER(5) REFERENCES ARTSHOW(SHOWID));


INSERT INTO ORGANIZER VALUES (8156,'Liam Smith',7000,480609175);
INSERT INTO ORGANIZER VALUES (6395,'Olivia Johnson',5000,250396023);
INSERT INTO ORGANIZER VALUES (4550,'Noah Williams',5500,252155304);
INSERT INTO ORGANIZER VALUES (4551,'Harry Styles',3200,252159876);


INSERT INTO ARTIST VALUES ('Vincent Van Gogh',TO_DATE('30/03/1853','DD/MM/YYYY'),'Zundert Netherlands');
INSERT INTO ARTIST VALUES ('Leonardo da Vinci',TO_DATE('15/04/1475','DD/MM/YYYY'),'Anchiano Italy');
INSERT INTO ARTIST VALUES ('Michelangelo',TO_DATE('06/03/1475','DD/MM/YYYY'),'Caprese Italy');
INSERT INTO ARTIST VALUES ('Harry Styles',TO_DATE('01/02/1994','DD/MM/YYYY'),'Worcestershire UK');


INSERT INTO ARTPIECE VALUES ('Starry Night','PostImpressionism',TO_DATE('1889','YYYY'),200000000,'Vincent Van Gogh');
INSERT INTO ARTPIECE VALUES ('The Creation of Adam','Fresco',TO_DATE('1551','YYYY'),800000000,'Michelangelo');
INSERT INTO ARTPIECE VALUES ('Mona Lisa','Renaissance',TO_DATE('1507','YYYY'),900000000,'Leonardo da Vinci');


INSERT INTO ARTSHOW VALUES(28219,'A102',TO_DATE('01/07/2022','DD/MM/YYYY'),TO_DATE('07/08/2022','DD/MM/YYYY'),'Michelangelo');
INSERT INTO ARTSHOW VALUES(62245,'A205',TO_DATE('23/03/2022','DD/MM/YYYY'),TO_DATE('23/05/2022','DD/MM/YYYY'),'Leonardo da Vinci');
INSERT INTO ARTSHOW VALUES(54082,'B120',TO_DATE('14/12/2021','DD/MM/YYYY'),TO_DATE('27/01/2022','DD/MM/YYYY'),'Vincent Van Gogh');


INSERT INTO VISITOR VALUES(4260373,'bobellwood@gmail.com',62245,'6145813816','Bob Ellwood');
INSERT INTO VISITOR VALUES(2395710,'nealbright@gmail.com',54082,'3306936460','Neal Bright');
INSERT INTO VISITOR VALUES(8014165,'senaclarke@gmail.com',28219,'5307982016','Sana Clarke');
INSERT INTO VISITOR VALUES(8014166,'ihateamber@gmail.com',62245 ,'5307982016','Johnny Depp');


--SELECTS AND DISPLAYS ALL ARTIST AND THEIR ARTWORKS NAME AND YEAR
SELECT ARTIST.ARTISTNAME, ARTPIECE.TITLE, ARTPIECE.ARTYEAR
FROM ARTIST,ARTPIECE
WHERE ARTIST.ARTISTNAME = ARTPIECE.ARTISTNAME;


--SELECTS AND DISPLAYS ARTSHOW IDS AND THEIR ARTISTS NAME
SELECT ARTSHOW.SHOWID, ARTIST.ARTISTNAME
FROM ARTSHOW, ARTIST
WHERE ARTSHOW.ARTISTNAME = ARTIST.ARTISTNAME;


--SELECTS AND DISPLAYS NAMES EMAIL AND THE ID OF THE VISITOR WHO VISITS ARTSHOW WITH ID 62245
SELECT VISITOR.NAME, VISITOR.EMAILADDRESS, VISITOR.VISITORID
FROM VISITOR 
WHERE VISITOR.SHOWID = (
SELECT ARTSHOW.SHOWID
FROM ARTSHOW 
WHERE ARTSHOW.SHOWID = 62245);


--SELECTS AND DISPLAYS ARTISTS NAMES FROM THE ARTSHOW WITH SHOWID 28219
SELECT ARTIST.ARTISTNAME
FROM ARTIST
WHERE ARTIST.ARTISTNAME = (
    SELECT ARTSHOW.ARTISTNAME
    FROM ARTSHOW
    WHERE ARTSHOW.SHOWID = 28219);


--DISPLAYS TOTAL VALUE OF THE ARTPIECES
SELECT SUM(ARTPIECE.ARTVALUE)
FROM ARTPIECE;


--DISPLAYS ORGANIZERS NAMES WHO EARNS MORE THAN $4000
SELECT COUNT(ORGANIZER.ORGANIZERID)
FROM ORGANIZER
WHERE ORGANIZER.SALARY > 4000;


--SELECTS AND DISPLAYS ALL OF THE ARTIST AND ORGANIZER NAMES
SELECT ARTIST.ARTISTNAME
FROM ARTIST
UNION
SELECT ORGANIZER.ORGANIZERNAME
FROM ORGANIZER;


--SELECTS AND DISPLAYS ORGANIZERS AND ARTISTS WHO HAS THE SAME NAMES
SELECT ORGANIZER.ORGANIZERNAME
FROM ORGANIZER
INTERSECT
SELECT ARTIST.ARTISTNAME
FROM ARTIST;
